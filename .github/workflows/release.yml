name: Release Studio
on:
  push:
    # branches: main

jobs:
  release:
    runs-on: ubuntu-latest
    # if: startsWith(github.event.head_commit.message, 'simple')
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - name: check commit name
        run: |
          COMMIT_MSG="${{ github.event.head_commit.message }}"
          COMMIT_TITLE="${COMMIT_MSG%%$'\n'*}"
          echo "${COMMIT_TITLE}"
          if [[ $COMMIT_TITLE =~ ^(v|Version )[0-9]+\.[0-9]+\.[0-9]+( \(#[0-9]+\))?$ ]]
          then
            echo "matched regex"
            PACKAGE_VERSION="${COMMIT_TITLE#Version }"
            PACKAGE_VERSION="${PACKAGE_VERSION#v}"
            PACKAGE_VERSION="${PACKAGE_VERSION%% *}"
            echo "${PACKAGE_VERSION}"
          else
            echo "did not match"
          fi
